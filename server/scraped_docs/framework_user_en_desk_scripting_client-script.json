{
  "route": "framework/user/en/desk/scripting/client-script",
  "sourceUrl": "https://docs.frappe.io/framework/user/en/desk/scripting/client-script",
  "title": "client-script",
  "content": "A Client Script lets you dynamically define a custom Form Script that is executed on a user's browser. If you choose to utilize non standard tools or libraries, make sure to test them on different browsers to ensure compatibility across your userbase.\n\n In Version 13, Custom Script was renamed to Client Script\n\n1. How to create a Client Script\n\nTo create a Client Script\n\nTo add/edit Client Script, ensure your role is System Manager.\nType \"New Client Script\" in the awesomebar and hit enter to create a new Client Script document.\nSelect the DocType whose form you wish to customize.\nUpdate the script using the preset template and save.\nHead over to the DocType you've customized and see the changes.\n\n2. Features\n\nAs compared to the restrictive nature of Server Scripts, everything is fair game in Client Scripts. This is because the frontend APIs are secure by design. You can utilize all of JavaScript APIs, along with Frappe's and any other JS or CSS library you might've customized Desk with.\n\n The validations you add through Client Script will only be applied while using the standard form view accessible through the browser. In case you wish for those to be applied through API or System Console access too, use Server Scripts.\n\n3. Examples\n\n3.1 Custom validation\n\nAdd additional form validations while creating or updating a document from Frappe's standard form view.\n\n// additional validation on Task dates\nfrappe.ui.form.on('Task', 'validate', function(frm) {\n if (frm.doc.from_date < get_today()) {\n msgprint('You can not select past date in From Date');\n }\n});\n\n3.2 Fetching values on field updates\n\nFetch local_tax_no on changing value of the customer field.\n\ncur_frm.add_fetch('customer', 'local_tax_no', 'local_tax_no');\n\n3.3 Customize field properties\n\nMake a field ibsn read only after creating the document.\n\n// make a field read-only after saving\nfrappe.ui.form.on('Task', {\n refresh: function(frm) {\n frm.set_df_property('ibsn', 'read_only', !frm.is_new());\n }\n});\n\n3.4 Customize field properties\n\nCalculate incentives on a Sales Invoice form on save.\n\n// calculate sales incentive\nfrappe.ui.form.on('Sales Invoice', {\n validate: function(frm) {\n // calculate incentives for each person on the deal\n total_incentive = 0\n $.each(frm.doc.sales_team, function(i, d) {\n // calculate incentive\n let incentive_percent = 2;\n if(frm.doc.base_grand_total > 400) incentive_percent = 4;\n // actual incentive\n d.incentives = flt(frm.doc.base_grand_total) * incentive_percent / 100;\n total_incentive += flt(d.incentives)\n });\n frm.doc.total_incentive = total_incentive;\n }\n});\n\n3.5 Filter email recipients\n\nYou can restrict the available emails via a Client Script. Every form can specify what email addresses should be selectable. This reduces the cognitive load for the user and avoids sending emails to wrong recipients.\n\nCommunicationComposer (the email dialog) will check if there is a Client Script supplying filters for the \"recipients\", \"cc\" and \"bcc\" fields. For example, if a Quotation should only show email addresses linked to the recipient of the Quotation, we can add the following script:\n\nfrappe.ui.form.on(\"Quotation\", {\n get_email_recipient_filters: function (frm, field) {\n // field can be \"recipients\", \"cc\" or \"bcc\"\n if (field === \"recipients\") {\n return [\n [\n \"Dynamic Link\",\n \"link_doctype\",\n \"=\",\n frm.doc.quotation_to\n ],\n [\n \"Dynamic Link\",\n \"link_name\",\n \"=\",\n frm.doc.party_name\n ],\n ];\n }\n },\n // ...\n};\n\nThe filters are referring to the Contact DocType and it's Links child table.\n\nEven with filters, it remains possible to paste arbitrary recipients.\n\n3.6 Set default email recipients\n\nIn standard processes like Sales Order -> Delivery Note -> Sales Invoice, the email recipients are often pre-defined. For example, this could be done in advance by the account manager.\n\nYou can set default email recipients via a Client Script. Every form can programmatically supply it's own default recipients.\n\nCommunicationComposer (the email dialog) will check if there is a Client Script supplying default recipients. For example, if your Quotation DocType contains a field named BCC (\"custom_bcc\"), you can add the following Client Script to use it as default BCC in the email dialog:\n\nfrappe.ui.form.on(\"Quotation\", {\n get_email_recipients: function (frm, field) {\n // field can be \"recipients\", \"cc\" or \"bcc\"\n if (field === \"bcc\") {\n return [frm.doc.custom_bcc]\n }\n },\n // ...\n};",
  "scrapedAt": "2025-10-22T00:03:34.068Z"
}